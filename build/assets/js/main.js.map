{"version":3,"sources":["scripts/config.js","main.js","scripts/scripts.js"],"names":["$","main","document","querySelector","getHeader","onBottom","appears","headerAnim","bottomEvent","contactsModal","slick","dots","infinite","speed","fade","arrows","cssEase","on","each","index","Scrolling","window","vh","height","scrollState","scrollTop","attr","addClass","removeClass","isMobile","item","position","trigger","init","prototype","bindScroll","clearDelay","obj","Math","round","e","preventDefault","width","address","String","location","substr","lastIndexOf","remove","find","one","animate","history","pushState","changePage","parents","loadPage","url","fetch","method","then","response","text","href","responseText","wrapper","createElement","innerHTML","oldContent","newContent","appendChild","style","fadeOut","opacity","fadeIn","onfinish","parentNode","removeChild","hasClass"],"mappings":"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","file":"main.js","sourcesContent":["","//=require scripts/config.js\r\n$(function() {\t\r\n\r\n\t/*gloabla vars*/\r\n\tvar main = document.querySelector(\"body\");\r\n\tvar getHeader = $(\".header\");\r\n\tvar onBottom = false;\r\n\tvar appears = [];\r\n\r\n\t/*functions start*/\r\n\theaderAnim();\r\n\tbottomEvent();\r\n\tcontactsModal();\r\n\r\n\t/*sliders init*/\r\n\t$(\".slider\").slick({\r\n\t\tdots: true,\r\n\t\tinfinite: true,\r\n\t\tspeed: 500,\r\n\t\tfade: false,\r\n\t\tarrows: false,\r\n\t\tcssEase: \"linear\"\r\n\t});\r\n\r\n\t/*reinit content scripts*/\r\n\t$(document).on(\"reinit\", function() {\r\n\t\t$(\".slider\").slick({\r\n\t\t\tdots: true,\r\n\t\t\tinfinite: true,\r\n\t\t\tspeed: 500,\r\n\t\t\tfade: false,\r\n\t\t\tarrows: false,\r\n\t\t\tcssEase: \"linear\"\r\n\t\t});\r\n\r\n\t\tbottomEvent();\r\n\t\theaderAnim();\r\n\r\n\t\t$(\".js-appear\").each(function(index) {\r\n\t\t\tappears[index] = new Scrolling($(this));\r\n\t\t});\r\n\t});\r\n\r\n\t/*Scroll events*/\r\n\t$(window).on(\"scroll\", function() {\r\n\t\tvar vh = $(window).height();\r\n\t\tvar scrollState = false;\r\n\r\n\t\tif ($(window).scrollTop() > vh - $(\".header\").height() && !onBottom) {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(-100px);\");\r\n\t\t} else {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(0);\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > $(\".js-top\").height()) {\r\n\t\t\t$(\".js-bottom\").addClass(\"is-clickable\");\r\n\t\t\t$(\".js-top-bg\").removeClass(\"active\");\r\n\t\t} else {\r\n\t\t\t$(\".js-bottom\").removeClass(\"is-clickable\");\r\n\t\t\t$(\".js-top-bg\").addClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > 0 && scrollState == false && (!isMobile())) {\r\n\t\t\t$(\".js-top-bg\").addClass(\"blur\");\r\n\t\t\tscrollState = true;\r\n\t\t} else {\r\n\t\t\t$(\".js-top-bg\").removeClass(\"blur\");\r\n\t\t\tscrollState = false;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction Scrolling(item) {\r\n\t\tthis.item = item;\t\t\r\n\t\tthis.position;\r\n\t\tif (isMobile){\r\n\t\t\tthis.trigger = 50;\r\n\t\t\t} else {\r\n\t\t\t\tthis.trigger = 0;\r\n\t\t\t}\t\t\r\n\t\tthis.init();\r\n\t}\r\n\tScrolling.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tthis.bindScroll();\r\n\t\t},\r\n\t\tclearDelay: function(){\r\n\t\t\tthis.item.attr(\"style\", \"animation-delay: 0s;\")\r\n\t\t},\r\n\t\tbindScroll: function() {\r\n\t\t\tvar obj = this;\r\n\t\t\t$(window).on(\"scroll\", function() {\r\n\t\t\t\tobj.clearDelay();\r\n\t\t\t\tobj.position = Math.round($(window).scrollTop());\r\n\t\t\t\tif (obj.position > obj.trigger) {\r\n\t\t\t\t\t$(obj.item).addClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t\tif (obj.position <= obj.trigger) {\r\n\t\t\t\t\t$(obj.item).removeClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t$(\".js-appear\").each(function(index) {\r\n\t\tappears[index] = new Scrolling($(this));\r\n\t});\r\n\r\n\tfunction contactsModal(){\r\n\t\t$(\".js-contacts-open\").on(\"click\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\t$(\".js-contacts\").attr(\"style\", \"left: 0;\")\r\n\t\t});\r\n\t\t\r\n\t\t$(\".js-contacts-close\").on(\"click\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\t$(\".js-contacts\").attr(\"style\", \"left: -100%;\")\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction isMobile(){\r\n\t\tif ($(window).width()< 767){\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction bottomEvent() {\r\n\t\tif (!isMobile()) {\r\n\t\t\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\t\t\tvar address = String(window.location).substr(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t\t\t);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$(this).addClass(\"full\");\r\n\t\t\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t\t\t$(\".case-single__section\").remove();\r\n\t\t\t\tonBottom = true;\t\t\t\r\n\t\t\t\t$(\".header__link-cont\").removeClass(\"after-anim\");\r\n\t\t\t\t$(\".header__link--works\").find(\"i\").removeClass(\"after-anim\");\r\n\t\t\t\t$(\".header__link--main\").find(\".header__link-cont\").addClass(\"width-rise-18\");\r\n\t\t\t\t$(\".header__link--works\").find(\"i\").addClass(\"width-rise-8\");\r\n\t\t\t\t$(\".header__link--menu\").find(\".header__link-cont\").addClass(\"width-rise-26\");\r\n\t\t\t\t$(\"body\").attr(\"style\",\"height: 200vh;\");\r\n\t\t\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\t\t\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\t\t\tchangePage();\r\n\t\t\t\t\tonBottom = false;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction headerAnim() {\r\n\t\t$(\".header__link-cont\").one(\r\n\t\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\t\tfunction() {\r\n\t\t\t\t$(this).removeClass(\"width-rise-18 width-rise-26\");\r\n\t\t\t\t$(this).addClass(\"after-anim\");\r\n\t\t\t\t$(\".js-appear\").addClass(\"slide-in-top\");\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t$(\".header__link-cont\").find(\"i\").one(\r\n\t\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\t\tfunction() {\r\n\t\t\t\t$(this).removeClass(\"width-rise-8\");\r\n\t\t\t\t$(this).parents(\".header__link-cont\").addClass(\"after-anim\");\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction loadPage(url) {\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: \"GET\"\r\n\t\t}).then(function(response) {\r\n\t\t\treturn response.text();\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\r\n\tfunction changePage() {\r\n\t\t// Заметьте, что URL уже изменился\r\n\t\tvar url = window.location.href;\r\n\r\n\t\tloadPage(url).then(function(responseText) {\r\n\t\t\tvar wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.innerHTML = responseText;\r\n\r\n\t\t\tvar oldContent = document.querySelector(\".page\");\r\n\t\t\tvar newContent = wrapper.querySelector(\".page\");\r\n\r\n\t\t\tmain.appendChild(newContent);\r\n\t\t\t$(document).trigger(\"reinit\");\r\n\t\t\tanimate(oldContent, newContent);\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tfunction animate(oldContent, newContent) {\r\n\t\toldContent.style.position = \"absolute\";\r\n\t\tvar fadeOut = oldContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [1, 0]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tvar fadeIn = newContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [0, 1]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tfadeIn.onfinish = function() {\r\n\t\t\t$(\"body\").attr(\"style\",\" \");\r\n\t\t\toldContent.parentNode.removeChild(oldContent);\r\n\t\t\t/*fix for anrdoid chrome*/\r\n\t\t\tif (!$(\".js-appear\").hasClass(\"slide-in-top\")){\r\n\t\t\t\t$(\".js-appear\").addClass(\"slide-in-top\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n});\r\n","$(function() {\t\r\n\r\n\t/*gloabla vars*/\r\n\tvar main = document.querySelector(\"body\");\r\n\tvar getHeader = $(\".header\");\r\n\tvar onBottom = false;\r\n\tvar appears = [];\r\n\r\n\t/*functions start*/\r\n\theaderAnim();\r\n\tbottomEvent();\r\n\tcontactsModal();\r\n\r\n\t/*sliders init*/\r\n\t$(\".slider\").slick({\r\n\t\tdots: true,\r\n\t\tinfinite: true,\r\n\t\tspeed: 500,\r\n\t\tfade: false,\r\n\t\tarrows: false,\r\n\t\tcssEase: \"linear\"\r\n\t});\r\n\r\n\t/*reinit content scripts*/\r\n\t$(document).on(\"reinit\", function() {\r\n\t\t$(\".slider\").slick({\r\n\t\t\tdots: true,\r\n\t\t\tinfinite: true,\r\n\t\t\tspeed: 500,\r\n\t\t\tfade: false,\r\n\t\t\tarrows: false,\r\n\t\t\tcssEase: \"linear\"\r\n\t\t});\r\n\r\n\t\tbottomEvent();\r\n\t\theaderAnim();\r\n\r\n\t\t$(\".js-appear\").each(function(index) {\r\n\t\t\tappears[index] = new Scrolling($(this));\r\n\t\t});\r\n\t});\r\n\r\n\t/*Scroll events*/\r\n\t$(window).on(\"scroll\", function() {\r\n\t\tvar vh = $(window).height();\r\n\t\tvar scrollState = false;\r\n\r\n\t\tif ($(window).scrollTop() > vh - $(\".header\").height() && !onBottom) {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(-100px);\");\r\n\t\t} else {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(0);\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > $(\".js-top\").height()) {\r\n\t\t\t$(\".js-bottom\").addClass(\"is-clickable\");\r\n\t\t\t$(\".js-top-bg\").removeClass(\"active\");\r\n\t\t} else {\r\n\t\t\t$(\".js-bottom\").removeClass(\"is-clickable\");\r\n\t\t\t$(\".js-top-bg\").addClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > 0 && scrollState == false && (!isMobile())) {\r\n\t\t\t$(\".js-top-bg\").addClass(\"blur\");\r\n\t\t\tscrollState = true;\r\n\t\t} else {\r\n\t\t\t$(\".js-top-bg\").removeClass(\"blur\");\r\n\t\t\tscrollState = false;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction Scrolling(item) {\r\n\t\tthis.item = item;\t\t\r\n\t\tthis.position;\r\n\t\tif (isMobile){\r\n\t\t\tthis.trigger = 50;\r\n\t\t\t} else {\r\n\t\t\t\tthis.trigger = 0;\r\n\t\t\t}\t\t\r\n\t\tthis.init();\r\n\t}\r\n\tScrolling.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tthis.bindScroll();\r\n\t\t},\r\n\t\tclearDelay: function(){\r\n\t\t\tthis.item.attr(\"style\", \"animation-delay: 0s;\")\r\n\t\t},\r\n\t\tbindScroll: function() {\r\n\t\t\tvar obj = this;\r\n\t\t\t$(window).on(\"scroll\", function() {\r\n\t\t\t\tobj.clearDelay();\r\n\t\t\t\tobj.position = Math.round($(window).scrollTop());\r\n\t\t\t\tif (obj.position > obj.trigger) {\r\n\t\t\t\t\t$(obj.item).addClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t\tif (obj.position <= obj.trigger) {\r\n\t\t\t\t\t$(obj.item).removeClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t$(\".js-appear\").each(function(index) {\r\n\t\tappears[index] = new Scrolling($(this));\r\n\t});\r\n\r\n\tfunction contactsModal(){\r\n\t\t$(\".js-contacts-open\").on(\"click\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\t$(\".js-contacts\").attr(\"style\", \"left: 0;\")\r\n\t\t});\r\n\t\t\r\n\t\t$(\".js-contacts-close\").on(\"click\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\t$(\".js-contacts\").attr(\"style\", \"left: -100%;\")\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction isMobile(){\r\n\t\tif ($(window).width()< 767){\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction bottomEvent() {\r\n\t\tif (!isMobile()) {\r\n\t\t\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\t\t\tvar address = String(window.location).substr(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t\t\t);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$(this).addClass(\"full\");\r\n\t\t\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t\t\t$(\".case-single__section\").remove();\r\n\t\t\t\tonBottom = true;\t\t\t\r\n\t\t\t\t$(\".header__link-cont\").removeClass(\"after-anim\");\r\n\t\t\t\t$(\".header__link--works\").find(\"i\").removeClass(\"after-anim\");\r\n\t\t\t\t$(\".header__link--main\").find(\".header__link-cont\").addClass(\"width-rise-18\");\r\n\t\t\t\t$(\".header__link--works\").find(\"i\").addClass(\"width-rise-8\");\r\n\t\t\t\t$(\".header__link--menu\").find(\".header__link-cont\").addClass(\"width-rise-26\");\r\n\t\t\t\t$(\"body\").attr(\"style\",\"height: 200vh;\");\r\n\t\t\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\t\t\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\t\t\tchangePage();\r\n\t\t\t\t\tonBottom = false;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction headerAnim() {\r\n\t\t$(\".header__link-cont\").one(\r\n\t\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\t\tfunction() {\r\n\t\t\t\t$(this).removeClass(\"width-rise-18 width-rise-26\");\r\n\t\t\t\t$(this).addClass(\"after-anim\");\r\n\t\t\t\t$(\".js-appear\").addClass(\"slide-in-top\");\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t$(\".header__link-cont\").find(\"i\").one(\r\n\t\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\t\tfunction() {\r\n\t\t\t\t$(this).removeClass(\"width-rise-8\");\r\n\t\t\t\t$(this).parents(\".header__link-cont\").addClass(\"after-anim\");\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction loadPage(url) {\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: \"GET\"\r\n\t\t}).then(function(response) {\r\n\t\t\treturn response.text();\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\r\n\tfunction changePage() {\r\n\t\t// Заметьте, что URL уже изменился\r\n\t\tvar url = window.location.href;\r\n\r\n\t\tloadPage(url).then(function(responseText) {\r\n\t\t\tvar wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.innerHTML = responseText;\r\n\r\n\t\t\tvar oldContent = document.querySelector(\".page\");\r\n\t\t\tvar newContent = wrapper.querySelector(\".page\");\r\n\r\n\t\t\tmain.appendChild(newContent);\r\n\t\t\t$(document).trigger(\"reinit\");\r\n\t\t\tanimate(oldContent, newContent);\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tfunction animate(oldContent, newContent) {\r\n\t\toldContent.style.position = \"absolute\";\r\n\t\tvar fadeOut = oldContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [1, 0]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tvar fadeIn = newContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [0, 1]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tfadeIn.onfinish = function() {\r\n\t\t\t$(\"body\").attr(\"style\",\" \");\r\n\t\t\toldContent.parentNode.removeChild(oldContent);\r\n\t\t\t/*fix for anrdoid chrome*/\r\n\t\t\tif (!$(\".js-appear\").hasClass(\"slide-in-top\")){\r\n\t\t\t\t$(\".js-appear\").addClass(\"slide-in-top\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n});\r\n"]}