{"version":3,"sources":["main.js","scripts/config.js","scripts/scripts.js"],"names":["svg4everybody","APP","$","css","data","document","styleSheets","insertRule","slick","dots","infinite","speed","fade","arrows","cssEase","on","e","address","String","window","location","substr","lastIndexOf","preventDefault","addClass","removeClass","remove","one","animate","scrollTop","history","pushState","attr","changePage","appears","each","index","Scrolling","vh","height","scrollState","item","offset","position","trigger","Math","round","top","init","prototype","bindScroll","obj","loadPage","url","fetch","method","then","response","text","main","querySelector","getHeader","href","responseText","wrapper","createElement","innerHTML","oldContent","newContent","appendChild","style","fadeOut","opacity","fadeIn","onfinish","parentNode","removeChild"],"mappings":"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","file":"main.js","sourcesContent":["svg4everybody();\r\n\r\nconst APP = {\r\n\r\n\r\n\r\n};\r\n$(function() {\r\n\t$(\".js-top:before\").css(\r\n\t\t\"background-image\",\r\n\t\t\"url(\" + $(\".js-top\").data(\"bg-url\") + \");\"\r\n\t);\r\n\r\n\tdocument.styleSheets[0].insertRule(\".js-top:before{background-image: url(\" + $(\".js-top\").data(\"bg-url\") + \");}\", 0);\r\n\t//document.styleSheets[0].addRule('.js-top:before','background-image: url(' + $(\".js-top\").data(\"bg-url\") + ');')\r\n\r\n\r\n\t$(\".slider\").slick({\r\n\t\tdots: true,\r\n\t\tinfinite: true,\r\n\t\tspeed: 500,\r\n\t\tfade: false,\r\n\t\tarrows: false,\r\n\t\tcssEase: \"linear\"\r\n\t});\r\n\r\n\t$(document).on(\"reinit\", function() {\r\n\t\t$(\".slider\").slick({\r\n\t\t\tdots: true,\r\n\t\t\tinfinite: true,\r\n\t\t\tspeed: 500,\r\n\t\t\tfade: false,\r\n\t\t\tarrows: false,\r\n\t\t\tcssEase: \"linear\"\r\n\t\t});\r\n\r\n\t\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\t\tvar address = String(window.location).substr(\r\n\t\t\t\t0,\r\n\t\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t\t);\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).addClass(\"full\");\r\n\t\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t\t$(\".case-single__section\").remove();\r\n\t\t\t$(\".header__link-cont\").addClass(\r\n\t\t\t\t\"width-rise-18 width-rise-22 width-rise-26\"\r\n\t\t\t);\r\n\t\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\t\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\t\tchangePage();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tvar appears = [];\r\n\t\t$(\".js-appear\").each(function(index) {\r\n\t\t\tappears[index] = new Scrolling($(this), 130);\r\n\t\t});\r\n\r\n\t\t$(\".js-top:before\").css(\r\n\t\t\t\"background-image\",\r\n\t\t\t\"url(\" + $(\".js-top\").data(\"bg-url\") + \");\"\r\n\t\t);\r\n\r\n\t\tdocument.styleSheets[0].insertRule(\".js-top:before{background-image: url(\" + $(\".js-top\").data(\"bg-url\") + \");}\", 0);\r\n\t});\r\n\r\n\t$(window).on(\"scroll\", function() {\r\n\t\tvar vh = $(window).height();\r\n\t\tvar scrollState = false;\r\n\r\n\t\tif ($(window).scrollTop() > vh - $(\".header\").height()) {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(-100px);\");\r\n\t\t} else {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(0);\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > $(\".js-top\").height()) {\r\n\t\t\t$(\".js-bottom\").addClass(\"is-clickable\");\r\n\t\t\t$(\".js-top\").removeClass(\"active\");\r\n\t\t} else {\r\n\t\t\t$(\".js-bottom\").removeClass(\"is-clickable\");\r\n\t\t\t$(\".js-top\").addClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > 0 && scrollState == false) {\r\n\t\t\t$(\".js-top\").addClass(\"blur\");\r\n\t\t\tscrollState = true;\r\n\t\t} else {\r\n\t\t\t$(\".js-top\").removeClass(\"blur\");\r\n\t\t\tscrollState = false;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction Scrolling(item, offset) {\r\n\t\tthis.item = item;\r\n\t\tthis.position;\r\n\t\tthis.trigger =\r\n\t\t\tMath.round(item.offset().top - offset) > 0\r\n\t\t\t\t? Math.round(item.offset().top - offset)\r\n\t\t\t\t: 10;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tScrolling.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tthis.bindScroll();\r\n\t\t},\r\n\t\tbindScroll: function() {\r\n\t\t\tvar obj = this;\r\n\r\n\t\t\t$(window).on(\"scroll\", function() {\r\n\t\t\t\tobj.position = Math.round($(window).scrollTop());\r\n\t\t\t\tif (obj.position > obj.trigger) {\r\n\t\t\t\t\t$(obj.item).addClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t\tif (obj.position < obj.trigger) {\r\n\t\t\t\t\t$(obj.item).removeClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tvar appears = [];\r\n\t$(\".js-appear\").each(function(index) {\r\n\t\tappears[index] = new Scrolling($(this), 130);\r\n\t});\r\n\r\n\t$(\".header__link-cont\").one(\r\n\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\tfunction() {\r\n\t\t\t$(this).removeClass(\"width-rise-18 width-rise-22 width-rise-26\");\r\n\t\t\t$(this).addClass(\"after-anim\");\r\n\t\t}\r\n\t);\r\n\r\n\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\tvar address = String(window.location).substr(\r\n\t\t\t0,\r\n\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t);\r\n\t\te.preventDefault();\r\n\t\t$(this).addClass(\"full\");\r\n\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t$(\".case-single__section\").remove();\r\n\t\t$(\".header__link-cont\").addClass(\r\n\t\t\t\"width-rise-18 width-rise-22 width-rise-26\"\r\n\t\t);\r\n\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\r\n\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\tchangePage();\r\n\t\t});\r\n\t});\r\n\r\n\tfunction loadPage(url) {\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: \"GET\"\r\n\t\t}).then(function(response) {\r\n\t\t\treturn response.text();\r\n\t\t});\r\n\t}\r\n\r\n\tvar main = document.querySelector(\"body\");\r\n\tvar getHeader = $(\".header\");\r\n\tfunction changePage() {\r\n\t\t// Заметьте, что URL уже изменился\r\n\t\tvar url = window.location.href;\r\n\r\n\t\tloadPage(url).then(function(responseText) {\r\n\t\t\tvar wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.innerHTML = responseText;\r\n\r\n\t\t\tvar oldContent = document.querySelector(\".page\");\r\n\t\t\tvar newContent = wrapper.querySelector(\".page\");\r\n\r\n\t\t\tmain.appendChild(newContent);\r\n\t\t\tanimate(oldContent, newContent);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction animate(oldContent, newContent) {\r\n\t\toldContent.style.position = \"absolute\";\r\n\r\n\t\tvar fadeOut = oldContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [1, 0]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tvar fadeIn = newContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [0, 1]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tfadeIn.onfinish = function() {\r\n\t\t\toldContent.parentNode.removeChild(oldContent);\r\n\t\t\t$(document).trigger(\"reinit\");\r\n\t\t};\r\n\t}\r\n});\r\n","const APP = {\r\n\r\n};","$(function() {\r\n\t$(\".js-top:before\").css(\r\n\t\t\"background-image\",\r\n\t\t\"url(\" + $(\".js-top\").data(\"bg-url\") + \");\"\r\n\t);\r\n\r\n\tdocument.styleSheets[0].insertRule(\".js-top:before{background-image: url(\" + $(\".js-top\").data(\"bg-url\") + \");}\", 0);\r\n\t//document.styleSheets[0].addRule('.js-top:before','background-image: url(' + $(\".js-top\").data(\"bg-url\") + ');')\r\n\r\n\r\n\t$(\".slider\").slick({\r\n\t\tdots: true,\r\n\t\tinfinite: true,\r\n\t\tspeed: 500,\r\n\t\tfade: false,\r\n\t\tarrows: false,\r\n\t\tcssEase: \"linear\"\r\n\t});\r\n\r\n\t$(document).on(\"reinit\", function() {\r\n\t\t$(\".slider\").slick({\r\n\t\t\tdots: true,\r\n\t\t\tinfinite: true,\r\n\t\t\tspeed: 500,\r\n\t\t\tfade: false,\r\n\t\t\tarrows: false,\r\n\t\t\tcssEase: \"linear\"\r\n\t\t});\r\n\r\n\t\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\t\tvar address = String(window.location).substr(\r\n\t\t\t\t0,\r\n\t\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t\t);\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).addClass(\"full\");\r\n\t\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t\t$(\".case-single__section\").remove();\r\n\t\t\t$(\".header__link-cont\").addClass(\r\n\t\t\t\t\"width-rise-18 width-rise-22 width-rise-26\"\r\n\t\t\t);\r\n\t\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\t\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\t\tchangePage();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tvar appears = [];\r\n\t\t$(\".js-appear\").each(function(index) {\r\n\t\t\tappears[index] = new Scrolling($(this), 130);\r\n\t\t});\r\n\r\n\t\t$(\".js-top:before\").css(\r\n\t\t\t\"background-image\",\r\n\t\t\t\"url(\" + $(\".js-top\").data(\"bg-url\") + \");\"\r\n\t\t);\r\n\r\n\t\tdocument.styleSheets[0].insertRule(\".js-top:before{background-image: url(\" + $(\".js-top\").data(\"bg-url\") + \");}\", 0);\r\n\t});\r\n\r\n\t$(window).on(\"scroll\", function() {\r\n\t\tvar vh = $(window).height();\r\n\t\tvar scrollState = false;\r\n\r\n\t\tif ($(window).scrollTop() > vh - $(\".header\").height()) {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(-100px);\");\r\n\t\t} else {\r\n\t\t\t$(\".header\").attr(\"style\", \"transform: translateY(0);\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > $(\".js-top\").height()) {\r\n\t\t\t$(\".js-bottom\").addClass(\"is-clickable\");\r\n\t\t\t$(\".js-top\").removeClass(\"active\");\r\n\t\t} else {\r\n\t\t\t$(\".js-bottom\").removeClass(\"is-clickable\");\r\n\t\t\t$(\".js-top\").addClass(\"active\");\r\n\t\t}\r\n\r\n\t\tif ($(window).scrollTop() > 0 && scrollState == false) {\r\n\t\t\t$(\".js-top\").addClass(\"blur\");\r\n\t\t\tscrollState = true;\r\n\t\t} else {\r\n\t\t\t$(\".js-top\").removeClass(\"blur\");\r\n\t\t\tscrollState = false;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction Scrolling(item, offset) {\r\n\t\tthis.item = item;\r\n\t\tthis.position;\r\n\t\tthis.trigger =\r\n\t\t\tMath.round(item.offset().top - offset) > 0\r\n\t\t\t\t? Math.round(item.offset().top - offset)\r\n\t\t\t\t: 10;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tScrolling.prototype = {\r\n\t\tinit: function() {\r\n\t\t\tthis.bindScroll();\r\n\t\t},\r\n\t\tbindScroll: function() {\r\n\t\t\tvar obj = this;\r\n\r\n\t\t\t$(window).on(\"scroll\", function() {\r\n\t\t\t\tobj.position = Math.round($(window).scrollTop());\r\n\t\t\t\tif (obj.position > obj.trigger) {\r\n\t\t\t\t\t$(obj.item).addClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t\tif (obj.position < obj.trigger) {\r\n\t\t\t\t\t$(obj.item).removeClass(\"fade-out\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tvar appears = [];\r\n\t$(\".js-appear\").each(function(index) {\r\n\t\tappears[index] = new Scrolling($(this), 130);\r\n\t});\r\n\r\n\t$(\".header__link-cont\").one(\r\n\t\t\"animationend  animationend  webkitAnimationEnd  oanimationend MSAnimationEnd\",\r\n\t\tfunction() {\r\n\t\t\t$(this).removeClass(\"width-rise-18 width-rise-22 width-rise-26\");\r\n\t\t\t$(this).addClass(\"after-anim\");\r\n\t\t}\r\n\t);\r\n\r\n\t$(\".js-bottom\").on(\"click\", function(e) {\r\n\t\tvar address = String(window.location).substr(\r\n\t\t\t0,\r\n\t\t\tString(window.location).lastIndexOf(\"/\")\r\n\t\t);\r\n\t\te.preventDefault();\r\n\t\t$(this).addClass(\"full\");\r\n\t\t$(\".case-single__bottom-title\").addClass(\"slide-out-bottom\");\r\n\t\t$(\".case-single__bottom-link\").addClass(\"slide-out-bottom\");\r\n\t\t$(\".case-single__bottom-bg\").removeClass(\"blur\");\r\n\t\t$(\".case-single__section\").remove();\r\n\t\t$(\".header__link-cont\").addClass(\r\n\t\t\t\"width-rise-18 width-rise-22 width-rise-26\"\r\n\t\t);\r\n\t\t$(this).one(\"transitionend\", function() {\r\n\t\t\t$(\"html,body\").animate({ scrollTop: 0 }, 0);\r\n\r\n\t\t\thistory.pushState(null, null, address + $(\".js-bottom\").attr(\"href\"));\r\n\t\t\tchangePage();\r\n\t\t});\r\n\t});\r\n\r\n\tfunction loadPage(url) {\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: \"GET\"\r\n\t\t}).then(function(response) {\r\n\t\t\treturn response.text();\r\n\t\t});\r\n\t}\r\n\r\n\tvar main = document.querySelector(\"body\");\r\n\tvar getHeader = $(\".header\");\r\n\tfunction changePage() {\r\n\t\t// Заметьте, что URL уже изменился\r\n\t\tvar url = window.location.href;\r\n\r\n\t\tloadPage(url).then(function(responseText) {\r\n\t\t\tvar wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.innerHTML = responseText;\r\n\r\n\t\t\tvar oldContent = document.querySelector(\".page\");\r\n\t\t\tvar newContent = wrapper.querySelector(\".page\");\r\n\r\n\t\t\tmain.appendChild(newContent);\r\n\t\t\tanimate(oldContent, newContent);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction animate(oldContent, newContent) {\r\n\t\toldContent.style.position = \"absolute\";\r\n\r\n\t\tvar fadeOut = oldContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [1, 0]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tvar fadeIn = newContent.animate(\r\n\t\t\t{\r\n\t\t\t\topacity: [0, 1]\r\n\t\t\t},\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tfadeIn.onfinish = function() {\r\n\t\t\toldContent.parentNode.removeChild(oldContent);\r\n\t\t\t$(document).trigger(\"reinit\");\r\n\t\t};\r\n\t}\r\n});\r\n"]}